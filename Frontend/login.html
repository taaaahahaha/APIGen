<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login Page</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />

  <!--Custom CSS -->
  <link rel="stylesheet" href="css/login.css">

</head>

<body>


  <div class="container square-container d-flex justify-content-center align-items-center">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 col-lg-4 justify-content-center align-items-center custom-class-position">
          <h1 class="heading text-align-center">
            LOGIN 
          </h1>
          <h5 class="text-align-center">API Generation made easy</h5>
          <p class="text-align-center">Your one stop solution to automated API<br> generation</p>
          <form class="justify-content-center text-align-center align-items-center container">
            <div class="margin">
              <div class="input-group mb-3">
                <input type="text" id="user-name" class="form-control " style="background-color:#E3E1EC !important; " placeholder="Username" aria-label="Username" aria-describedby="basic-addon1">
              </div>
            </div>
            <div class="margin">
              <input type="password" id="password" class="form-control" style="background-color:#E3E1EC !important; " placeholder="Password" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div>
              <button type="button" class="btn btn-primary"
                style="--bs-btn-padding-y: .5rem; --bs-btn-padding-x: 38%; --bs-btn-font-size: 1rem;" onClick="login()">
                LOGIN
              </button>
            </div>
          </form>
        </div>
        <div class="col-sm-12 col-lg-8 justify-content-center align-items-center d-flex">
          <img src="images/login_page.jpg" alt="illus" class="img" id="login-page-img">
        </div>
      </div>
    </div>
  </div>


  <!-- BootStrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
</body>
<script>
  const apiUrl = "https://1373-182-48-212-224.in.ngrok.io/";


  function login(){
      var username = document.getElementById("user-name").value;
      var password = document.getElementById("password").value;
      var data = {
          "username": username,
          "password": password
      }
      var url = apiUrl + "auth/login/";
    const other_params = {
          method: "POST", 
          mode:'cors',
          headers: {
          "Content-Type": "application/json",
          'enctype': 'multipart/form-data',
          },
          body: JSON.stringify(data),
          credentials: 'same-origin'
      };
  fetch(url, other_params)
      .then(function (response) {
          console.log(response);
          if (response.ok) {
              if (response.status == 200) {
                  window.location.assign("selection.html");
          } else {
              window.alert("Invalid Credentials!");

          }
          } else {
              throw new Error("Could not reach the API");
          }
});

}
</script>
</html>